<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Floatchat — Glassmorphic Plots</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@500;700&display=swap" rel="stylesheet">

<!-- Plotly -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
* { box-sizing:border-box; margin:0; padding:0; }
html, body { height:100%; font-family: 'Raleway', system-ui, sans-serif; overflow: hidden; }

body {
  display: flex;
  flex-direction: column;
  background:
    linear-gradient(rgba(0,43,69,0.3), rgba(94,200,242,0.3)),
    url('https://images.unsplash.com/photo-1518563077661-23ad56581d77?w=1920&auto=format&fit=crop&q=80') no-repeat center center fixed;
  background-size: cover;
}

/* Header + Footer */
header, footer { color:white; padding:15px 30px; z-index:50; }
header {
  display:flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
}
header h1 {
  font-weight: 700;
  font-size: 2.2rem;
  margin:0;
  background: linear-gradient(90deg, #00e5ff, #004e92);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}
.header-buttons { display:flex; gap:12px; }
.header-buttons .login-btn, .header-buttons .signup-btn {
  padding: 8px 16px;
  border:none;
  cursor:pointer;
  font-weight:700;
  font-size:1rem;
  transition:0.2s;
}
.login-btn { background:transparent; color:white; }
.login-btn:hover { color:#00e5ff; }
.signup-btn {
  border-radius:25px;
  background: rgba(255,255,255,0.2);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.35);
  color:white;
}
.signup-btn:hover { background: rgba(0,229,255,0.25); color:#00e5ff; }

footer { text-align:center; font-size: 0.9rem; text-shadow:0 1px 2px rgba(0,0,0,0.6); }

/* MAIN CONTENT SPLIT */
main {
  flex: 1;
  display: flex;
  height: calc(100% - 120px);
  overflow: hidden;
}

/* Left Nav + Chat Wrapper */
.left-wrapper {
  flex: 6;
  display: flex;
  overflow: hidden;
}

/* Navigation Bar (Glassmorphism) */
nav {
  width: 220px;
  background: rgba(0,0,0,0.35);
  backdrop-filter: blur(12px);
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.3);
  display: flex;
  flex-direction: column;
  padding:16px;
  gap:8px;
  color:white;
}
nav a {
  color:white;
  text-decoration:none;
  padding:10px 14px;
  border-radius:8px;
  font-weight:600;
  transition:0.3s;
  display:block;
}
nav a:hover, nav a.active {
  background: rgba(255,255,255,0.25);
  color:#00e5ff;
}
/* Clear Chat button */
#clear-chat-btn {
  margin-top: auto;
  padding: 10px 14px;
  border-radius: 12px;
  background: rgba(255,255,255,0.15);
  border: 1px solid rgba(255,255,255,0.3);
  color:white;
  font-weight:600;
  cursor:pointer;
  transition:0.3s;
}
#clear-chat-btn:hover {
  background: rgba(0,229,255,0.25);
  color:#00e5ff;
}

/* Left Panel */
.left-panel {
  flex:1;
  display:flex;
  flex-direction:column;
  position:relative; /* important for info & chat */
  padding:20px;
  color:white;
  overflow:hidden;
}

/* Welcome Text */
#welcome-text {
  margin-left:20px;
  transition: opacity 0.7s ease;
}
#welcome-text.fade-out { opacity:0; transition: opacity 0.6s ease; }
#welcome-text h2 { font-size:2.7rem; line-height:1.2; animation: fadeSlideIn 1s forwards; }
#welcome-text h1 { font-size:3.5rem; margin:0 0 12px 0; line-height:1.2; animation: fadeSlideIn 1s forwards; }
#welcome-text p { font-size:1.3rem; margin-top:12px; line-height:1.5; text-shadow:0 1px 2px rgba(0,0,0,0.6); }

/* AI Description Bubble */
#ai-desc-bubble {
  width: 90%;
  background: rgba(0,0,0,0.35);
  backdrop-filter: blur(12px);
  border-radius: 24px;
  padding: 15px 20px;
  margin-top: 20px;
  transition: opacity 0.7s ease;
  color:#f0f0f0;
  text-shadow:0 1px 2px rgba(0,0,0,0.6);
}
#ai-desc-bubble.fade-out { opacity:0; }
#ai-desc-bubble p { font-size:1.2rem; margin-bottom:10px; }
#ai-desc-bubble ul { margin-left:20px; line-height:1.6; }
#ai-desc-bubble li { font-size:1.05rem; margin:6px 0; }

/* INFO BUBBLE (new) */
#info-bubble {
  position: absolute;
  top: 18px;
  left: 50%;
  transform: translateX(-50%) translateY(-8px);
  width: calc(100% - 48px);
  max-width: 520px;
  height: 86px; /* rectangle, empty for now */
  background: rgba(0,0,0,0.35);
  backdrop-filter: blur(12px);
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.25);
  display: none;
  opacity: 0;
  transition: opacity 0.35s ease, transform 0.35s ease;
  z-index: 30;
  box-shadow: 0 6px 20px rgba(0,0,0,0.4), 0 0 18px rgba(0,229,255,0.06) inset;
}

/* Chat Container */
.chat-container {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  display:flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  width: 80%;
  max-width: 550px;
}
#output-bubble {
  width: 100%;
  height: 350px;
  background: rgba(0,0,0,0.35);
  backdrop-filter: blur(12px);
  border-radius: 24px;
  color: #f0f0f0;
  padding: 14px;
  display: none;
  flex-direction: column;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: rgba(0,229,255,0.6) rgba(255,255,255,0.1);
  text-shadow:0 1px 2px rgba(0,0,0,0.6);
}
#output-bubble::-webkit-scrollbar { width:8px; }
#output-bubble::-webkit-scrollbar-thumb { background: rgba(0,229,255,0.6); border-radius:4px; }
#output-bubble::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); }

#output-bubble.show { display:flex; }
.message { margin: 6px 0; padding: 10px 14px; font-size: 1rem; max-width: 85%; border-radius: 20px; opacity:0; transition: opacity 0.5s ease; }
.user-message { align-self:flex-end; background: transparent; color: #00e5ff; text-shadow:0 1px 2px rgba(0,0,0,0.6); }
.ai-message { align-self:flex-start; background: rgba(255,255,255,0.8); color:black; }

/* Chat Input */
.chat-input-container {
  width: 100%;
  height: 50px;
  background: rgba(0,0,0,0.35);
  backdrop-filter: blur(12px);
  border-radius: 24px;
  display:flex;
  align-items:center;
  padding:6px 12px;
  color:#f0f0f0;
}
.chat-input-container input {
  flex:1; border:none; outline:none; background:transparent; color:white; font-size:1.1rem; caret-color:#00e5ff;
}
.chat-input-container button {
  padding: 8px 14px; border:none; border-radius:20px; background:#00e5ff; color:#002b45; font-weight:600; cursor:pointer; margin-left:10px;
}
.chat-input-container button:hover { background:#00bcd4; }

/* Right Panel for Plots */
.right-panel {
  flex:4;
  display:flex;
  flex-direction: column;
  gap:10px;
  padding:10px;
}
#plotly-container, #leaflet-container {
  flex:1;
  border-radius:12px;
  overflow:hidden;
  background: rgba(0,0,0,0.35);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.3);
  padding:10px;
  transition:0.3s;
}
#plotly-container:hover, #leaflet-container:hover {
  box-shadow: 0 0 20px rgba(0,229,255,0.4);
}

/* Responsive */
@media (max-width:900px){
  main { flex-direction: column; }
  .left-wrapper, .right-panel { flex:unset; height:50%; }
  .chat-container { width:90%; }
  nav { width:100%; flex-direction:row; border-radius:12px; justify-content:space-around; }
}
</style>
</head>

<body>
<header>
  <h1>Floatchat</h1>
  <div class="header-buttons">
    <button class="login-btn">Login</button>
    <button class="signup-btn">Sign Up</button>
  </div>
</header>

<main>
  <div class="left-wrapper">
    <nav>
      <a href="#" class="active">Dashboard</a>
      <a href="#">Chat</a>
      <a href="#">Visualizations</a>
      <a href="#">Settings</a>
      <button id="clear-chat-btn">Clear Chat</button>
    </nav>

    <div class="left-panel">
      <div id="welcome-text" class="fade-slide">
        <h2>Welcome to</h2>
        <h1>Floatchat</h1>
        <p>Your AI guide to ARGO floats and ocean insights.</p>

        <div id="ai-desc-bubble">
          <p>Floatchat AI can help you:</p>
          <ul>
            <li>Query ARGO float data using natural language.</li>
            <li>Visualize salinity, temperature, and BGC parameters.</li>
            <li>Compare profiles across regions and time periods.</li>
            <li>Locate nearest ARGO floats to any location.</li>
            <li>Explore oceanographic datasets effortlessly.</li>
          </ul>
        </div>
      </div>

      <!-- Info bubble (empty rectangle) -->
      <div id="info-bubble" aria-hidden="true"></div>

      <div class="chat-container">
        <div id="output-bubble" aria-live="polite" aria-atomic="false"></div>
        <div class="chat-input-container">
          <input type="text" id="chat-input" placeholder="Type here to begin . . ." autocomplete="off" aria-label="Chat input">
          <button id="send-btn">Send</button>
        </div>
      </div>
    </div>
  </div>

  <div class="right-panel">
    <div id="plotly-container" role="region" aria-label="Plot area"></div>
    <div id="leaflet-container" role="region" aria-label="Map area" style="min-height:200px"></div>
  </div>
</main>

<footer>© 2025 Floatchat</footer>

<script>
const sendBtn = document.getElementById('send-btn');
const chatInput = document.getElementById('chat-input');
const outputBubble = document.getElementById('output-bubble');
const welcomeText = document.getElementById('welcome-text');
const aiDesc = document.getElementById('ai-desc-bubble');
const infoBubble = document.getElementById('info-bubble');
const clearBtn = document.getElementById('clear-chat-btn');

let placeholderOptions = [
  "Show me salinity profiles near the equator in March 2023",
  "Compare BGC parameters in the Arabian Sea for the last 6 months",
  "What are the nearest ARGO floats to this location?",
  "Visualize temperature profile of Indian Ocean floats",
  "Show trajectories of selected ARGO floats"
];
let placeholderIndex = 0;
setInterval(() => {
  chatInput.placeholder = placeholderOptions[placeholderIndex];
  placeholderIndex = (placeholderIndex + 1) % placeholderOptions.length;
}, 4000);

// Sequential fade-in function
function appendMessage(content, className){
  const msg = document.createElement('div');
  msg.className = `message ${className}`;
  msg.textContent = content;
  outputBubble.appendChild(msg);
  setTimeout(()=>{ msg.style.opacity=1; outputBubble.scrollTop = outputBubble.scrollHeight; }, 50);
}

// Info bubble behavior
let infoShown = false;

// Chat send
sendBtn.addEventListener('click', () => {
  let text = chatInput.value.trim();
  if(!text) return;

  welcomeText.classList.add('fade-out');
  aiDesc.classList.add('fade-out');

  setTimeout(()=>{
    welcomeText.style.display='none';
    aiDesc.style.display='none';

    outputBubble.style.display = 'flex';
    outputBubble.classList.add('show');

    if(!infoShown){
      infoBubble.style.display = 'block';
      setTimeout(()=> infoBubble.classList.add('show'), 20);
      infoShown = true;
    }

    appendMessage(text, 'user-message');
    setTimeout(()=>{ appendMessage("AI: I hear you said — " + text, 'ai-message'); }, 600);

  }, 700);

  chatInput.value='';
  chatInput.focus();
});

chatInput.addEventListener('keypress', e=>{ if(e.key==='Enter') sendBtn.click(); });

// Clear chat
clearBtn.addEventListener('click', ()=>{
  // Hide chat & info
  outputBubble.innerHTML='';
  outputBubble.classList.remove('show');
  outputBubble.style.display='none';
  infoBubble.classList.remove('show');
  infoBubble.style.display='none';

  // Show welcome text & AI description smoothly
  welcomeText.style.display='block';
  aiDesc.style.display='block';
  setTimeout(()=>{
    welcomeText.classList.remove('fade-out');
    aiDesc.classList.remove('fade-out');
    infoShown = false;
  },50);

  chatInput.focus();
});

/* Plotly Example */
Plotly.newPlot('plotly-container',[{
  x:[1,2,3,4], y:[10,15,13,17], type:'scatter', mode:'lines+markers', marker:{color:'#00e5ff'}
}], {margin:{t:20}, paper_bgcolor:'rgba(0,0,0,0)', plot_bgcolor:'rgba(0,0,0,0)', font:{color:'white'}});

/* Leaflet Example */
var map = L.map('leaflet-container').setView([20,80],3);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'&copy; OpenStreetMap contributors'}).addTo(map);
L.marker([20,80]).addTo(map).bindPopup("Sample Float Location").openPopup();
</script>
</body>
</html>
